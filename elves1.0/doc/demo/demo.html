<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0;">
<title>demo</title>
<script type="text/javascript" src="../../src/elves.js"></script>
<script type="text/javascript" src="../../src/plugin/dom.js"></script>
<script type="text/javascript">
$(function() {
	$.cacheImg('porker', 'img/img.png');   //预先加载img资源
	
	var card1 = {   //定义entity()方法的参数
		sx : 0,   //可选。原图片开始剪切的 x 坐标位置。
		sy : 0,   //可选。原图片开始剪切的 y 坐标位置。
		sw : 50,    //可选。原图片被剪切的宽度。
		sh : 30,    //可选。原图片被剪切的高度。
		dx : 0,    //在画布上放置图像的 x 坐标位置。
		dy : 0,    //在画布上放置图像的 y 坐标位置。
		dw : 50,   //可选。在画布上要使用的图像的宽度。（伸展或缩小图像）
		dh : 30,   //可选。在画布上要使用的图像的高度。（伸展或缩小图像）
		type : 'img',   //创建实体的类型，为img型
		res : 'porker',   //预先加载img资源的名称
		name : 'card1'   //实体的名称，便于选择器选择，例如：$("$desk@card1")，
	};
	
	var card2 = {
		sx : 50,
		sy : 30,
		sw : 50,
		sh : 30,
		dx : 40,
		dy : 10,
		dw : 50,
		dh : 30,
		type : 'img',
		res : 'porker',
		name : 'card2'
	};
	
	var card3 = {
		sx : 100,  //
		sy : 60,
		sw : 50,
		sh : 30,
		dx : 100,
		dy : 0,
		dw : 50,
		dh : 30,
		type : 'img',
		res : 'porker',
		name : 'card3'
	};
	
	
	//创建一个名为'desk'的canvas  content对象
	$("#test").canvas("desk");
	
	//在$("$desk")中创建一个实体
	$("$desk").entity("card1",{
		sx : 100,  //
		sy : 60,
		sw : 50,
		sh : 30,
		dx : 100,
		dy : 0,
		dw : 50,
		dh : 30
	}).res("porker");
	
	
	$(function(){
				$('#test').canvas('test');
				$('$test').entity('shape1',{
					r:50,
					x:30,
					y:40,
				}).shape(function(){
					var option = this[0],cxt = this.context;
					cxt.save();
					cxt.fillStyle = '#999999';
					cxt.beginPath();
					cxt.arc(option.x, option.y, option.r, 0, 2 * Math.PI, true);
					cxt.closePath();
					cxt.fill();
					cxt.restore();
				}).animation().to({
					r:10,
					x:300,
					y:240,
				},1000).onUpdate( function () {
					console.log(this.r);
				}).start();
			});
	
	
	//$("$desk").clear();
	
	
	/*$('#test').canvas('test');
				$('$test').entity('shape1',{
					r:50,
					x:30,
					y:40,
				}).shape(function(){
					var option = this[0],cxt = this.context;
					cxt.save();
					cxt.fillStyle = '#999999';
					cxt.beginPath();
					cxt.arc(option.x, option.y, option.r, 0, 2 * Math.PI, true);
					cxt.closePath();
					cxt.fill();
					cxt.restore();
				});*/
	//刷新画布
	//$("$desk@card1").draw();
    
    //$("$desk@card1").animation().to({
//		dx : 100 ,
//		dy : 100 ,
//	}, 1000)
//	.repeat(10)    //动画的yoyo效果要将repeat()的值至少设置为1。
//	.yoyo( true )   //将动画的yoyo效果开启。
//	.start();    //动画开始执行。
});
</script>

</head>
<body>
<canvas id="test" width="507px" height="320px" style="border:1px solid #F00"></canvas>
<div id="log"></div>
</body>
</html>
